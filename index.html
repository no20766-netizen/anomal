<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>anomal â€” Minimal Headwear</title>
  <meta name="description" content="anomal. ë¯¸ë‹ˆë©€ ìº í”„ìº¡ & ë³¼ìº¡. 10~20ëŒ€ë¥¼ ìœ„í•œ ë°ì¼ë¦¬ í—¤ë“œì›¨ì–´." />
  <link rel="canonical" href="https://anomal.kr/" />
  <meta property="og:title" content="anomal â€” Minimal Headwear" />
  <meta property="og:description" content="ë¯¸ë‹ˆë©€ ìº í”„ìº¡ & ë³¼ìº¡ ì»¬ë ‰ì…˜" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/img/cover.jpg" />
  <meta property="og:url" content="https://anomal.kr/" />
  <link rel="icon" href="/favicon.ico" />
  <style>
    :root{ --bg:#ffffff; --fg:#111111; --muted:#6b7280; --card:#ffffff; --line:#e5e7eb; --accent:#111111; --ok:#13c27a; --warn:#f0b429; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, sans-serif}
    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}
    .wrap{max-width:1150px;margin:0 auto;padding:0 20px}
    .hd{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);z-index:20}
    .hdin{display:flex;align-items:center;justify-content:space-between;height:68px;gap:16px}
    .brand{display:flex;align-items:center;gap:8px;font-weight:800;letter-spacing:.08em;text-transform:uppercase}
    .brand img{height:34px;width:auto}
    .nav{display:flex;gap:18px;align-items:center}
    .nav a{font-size:14px;color:var(--muted)}
    .cta{border:1px solid var(--fg);padding:8px 12px;border-radius:999px;font-size:14px}
    .cartbtn{position:relative;border:1px solid var(--line);padding:8px 12px;border-radius:999px;background:#fff}
    .badge{position:absolute;top:-6px;right:-6px;background:#111;color:#fff;border-radius:999px;font-size:11px;line-height:1;padding:4px 6px;min-width:18px;text-align:center}

    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:32px;align-items:center;padding:56px 0;border-bottom:1px solid var(--line)}
    .hero .img{aspect-ratio:4/3;border-radius:24px;overflow:hidden;background:#f3f4f6;display:flex;align-items:center;justify-content:center}
    .hero h1{font-size:36px;margin:0 0 12px}
    .hero p{color:var(--muted);margin:0 0 20px;line-height:1.6}
    .hero .btns{display:flex;gap:10px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;justify-content:center;height:44px;padding:0 16px;border-radius:12px;border:1px solid var(--line);background:var(--card);cursor:pointer}
    .btn.prime{border-color:#111;background:#111;color:#fff}
    .btn.ghost{background:#fff}

    .sec{padding:42px 0}
    .sec h2{font-size:20px;margin:0 0 14px}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;display:flex;flex-direction:column;transition:transform .12s ease, box-shadow .12s ease;position:relative}
    .card:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,.06)}
    .ph{aspect-ratio:1/1;background:#fafafa;object-fit:cover}
    .meta{padding:12px 12px 16px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .name{font-weight:600}
    .price{color:#111;font-weight:700}
    .badges{display:flex;gap:8px;margin-top:8px;color:#6b7280;font-size:12px}
    .stock{position:absolute;left:12px;top:12px;background:#111;color:#fff;font-size:12px;padding:4px 8px;border-radius:999px}
    .buy{margin-top:10px;display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .buy .btn{width:100%}

    .reviews{display:grid;grid-template-columns:1fr;gap:12px}
    .rv{border:1px solid var(--line);border-radius:14px;padding:12px;background:#fff}
    .rv .stars{font-size:14px;color:var(--warn)}
    .rv .txt{color:var(--muted);font-size:14px;line-height:1.6}

    .ft{border-top:1px solid var(--line);padding:28px 0 64px;color:#6b7280;font-size:13px;text-align:center}

    /* Drawer/Modal */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:opacity .2s;z-index:40}
    .overlay.show{opacity:1;pointer-events:auto}
    .drawer{position:fixed;right:-420px;top:0;height:100vh;width:400px;background:#fff;border-left:1px solid var(--line);box-shadow:-10px 0 30px rgba(0,0,0,.08);transition:right .25s;z-index:50;display:flex;flex-direction:column}
    .drawer.show{right:0}
    .drawer h3{margin:0;padding:18px 16px;border-bottom:1px solid var(--line)}
    .drawer .content{flex:1;overflow:auto;padding:16px}
    .drawer .row{display:flex;align-items:center;justify-content:space-between}
    .qty{display:inline-flex;border:1px solid var(--line);border-radius:10px;overflow:hidden}
    .qty button{width:28px;height:28px;border:0;background:#fff}
    .qty span{display:inline-flex;align-items:center;justify-content:center;width:34px}
    .drawer .foot{border-top:1px solid var(--line);padding:12px 16px}

    .modal{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:opacity .2s;z-index:60}
    .modal.show{opacity:1;pointer-events:auto}
    .modal .box{background:#fff;border:1px solid var(--line);border-radius:16px;padding:20px;min-width:320px}
    .modal .box h3{margin:0 0 10px}
    .modal .box label{display:block;font-size:13px;color:#6b7280;margin:8px 0 4px}
    .modal .box input{width:100%;height:40px;border:1px solid var(--line);border-radius:10px;padding:0 10px}

    .toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#111;color:#fff;border:1px solid #000;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:opacity .25s;z-index:70}
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <header class="hd">
    <div class="wrap hdin">
      <div class="brand">
        <img src="/img/logo-black.jpg" alt="anomal logo black" />
        <img src="/img/logo-red.jpg" alt="anomal logo red" />
      </div>
      <nav class="nav">
        <a href="#shop">Shop</a>
        <a href="#about">About</a>
        <a href="#reviews">Reviews</a>
        <a href="#cs">Policy</a>
        <button id="loginBtn" class="cta" type="button">ë¡œê·¸ì¸</button>
        <button id="cartBtn" class="cartbtn" type="button">ì¥ë°”êµ¬ë‹ˆ <span id="cartCount" class="badge" style="display:none">0</span></button>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="img">
        <img src="/img/cover.jpg" alt="anomal camp cap" style="width:100%;height:100%;object-fit:cover"/>
      </div>
      <div>
        <h1>Minimal Camp Cap</h1>
        <p>êµ°ë”ë”ê¸° ì—†ëŠ” ì‹¤ë£¨ì—£, ë°ì¼ë¦¬ë¡œ ì“°ê¸° ì¢‹ì€ ìº í”„ìº¡. ë‚´êµ¬ì„± ë†’ì€ íŒ¨ë¸Œë¦­ê³¼ ê· í˜• ì¡íŒ íŒ¨ë„ ë¹„ìœ¨ë¡œ ë¨¸ë¦¬í˜•ì— ìì—°ìŠ¤ëŸ½ê²Œ ë§ìŠµë‹ˆë‹¤.</p>
        <div class="btns">
          <a class="btn prime" href="/?view=shop" target="_blank" rel="noopener">ë°”ë¡œ ë³´ê¸°</a>
          <a class="btn ghost" href="https://www.instagram.com/yourbrand" target="_blank" rel="noopener">Instagram</a>
          <div style="font-size:12px;color:#6b7280">ì§€ê¸ˆ ì£¼ë¬¸ ì‹œ <span id="etaText">ë„ì°© ì˜ˆì •ì¼ ê³„ì‚°ì¤‘â€¦</span></div>
        </div>
      </div>
    </section>

    <section id="shop" class="sec">
      <h2>Shop</h2>
      <div class="grid">
        <article class="card" data-sku="camp-blue" data-price="59000" data-name="Camp Cap â€” Blue" data-color="Blue" data-stock="7">
          <span class="stock">ì¬ê³  7</span>
          <img class="ph" src="/img/cap_blue.jpg" alt="Camp Cap â€” Blue" />
          <div class="meta">
            <div class="row">
              <div class="name">Camp Cap â€” Blue</div>
              <div class="price">â‚©59,000</div>
            </div>
            <div class="badges"><span>ğŸšš í‰ì¼ 14ì‹œ ì´ì „ ë‹¹ì¼ì¶œê³ </span><span>â†© 7ì¼ ì´ë‚´ êµí™˜Â·ë°˜í’ˆ</span></div>
            <div class="buy">
              <button class="btn addcart">ì¥ë°”êµ¬ë‹ˆ</button>
              <button class="btn prime checkout">ë°”ë¡œêµ¬ë§¤</button>
            </div>
          </div>
        </article>
        <article class="card" data-sku="camp-black" data-price="59000" data-name="Camp Cap â€” Black" data-color="Black" data-stock="3">
          <span class="stock">ì¬ê³  3</span>
          <img class="ph" src="/img/cap_black.jpg" alt="Camp Cap â€” Black" />
          <div class="meta">
            <div class="row">
              <div class="name">Camp Cap â€” Black</div>
              <div class="price">â‚©59,000</div>
            </div>
            <div class="badges"><span>ğŸšš í‰ì¼ 14ì‹œ ì´ì „ ë‹¹ì¼ì¶œê³ </span><span>â†© 7ì¼ ì´ë‚´ êµí™˜Â·ë°˜í’ˆ</span></div>
            <div class="buy">
              <button class="btn addcart">ì¥ë°”êµ¬ë‹ˆ</button>
              <button class="btn prime checkout">ë°”ë¡œêµ¬ë§¤</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <section id="about" class="sec">
      <h2>About</h2>
      <p style="color:var(--muted);line-height:1.75">anomalì€ 10ëŒ€Â·20ëŒ€ë¥¼ ìœ„í•œ ë¯¸ë‹ˆë©€ í—¤ë“œì›¨ì–´ ë¸Œëœë“œì…ë‹ˆë‹¤. ì‹¬í”Œí•˜ì§€ë§Œ ì™„ì„±ë„ ë†’ì€ ë””í…Œì¼ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.</p>
    </section>

    <section id="reviews" class="sec">
      <h2>Reviews</h2>
      <div id="reviewList" class="reviews"></div>
      <div style="margin-top:12px;border:1px solid var(--line);border-radius:12px;padding:12px">
        <h3 style="margin:0 0 8px;font-size:16px">ë¦¬ë·° ë‚¨ê¸°ê¸°</h3>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:8px">
          <select id="revSku" style="height:40px;border:1px solid var(--line);border-radius:10px;padding:0 10px">
            <option value="camp-blue">Camp Cap â€” Blue</option>
            <option value="camp-black">Camp Cap â€” Black</option>
          </select>
          <select id="revStar" style="height:40px;border:1px solid var(--line);border-radius:10px;padding:0 10px">
            <option value="5">â˜…â˜…â˜…â˜…â˜… (5)</option>
            <option value="4">â˜…â˜…â˜…â˜…â˜† (4)</option>
            <option value="3">â˜…â˜…â˜…â˜†â˜† (3)</option>
            <option value="2">â˜…â˜…â˜†â˜†â˜† (2)</option>
            <option value="1">â˜…â˜†â˜†â˜†â˜† (1)</option>
          </select>
        </div>
        <textarea id="revText" rows="3" style="width:100%;border:1px solid var(--line);border-radius:10px;padding:8px" placeholder="ì°©ìš©ê°, í•, ìƒ‰ê° ë“± ììœ ë¡­ê²Œ ì‘ì„±"></textarea>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="revSubmit" class="btn prime" type="button">ë“±ë¡</button>
          <button id="revClear" class="btn" type="button">ëª¨ë“  ë¦¬ë·° ì´ˆê¸°í™”</button>
        </div>
      </div>
    </section>

    <section id="cs" class="sec">
      <h2>ë°°ì†¡/êµí™˜/í™˜ë¶ˆ</h2>
      <div class="policy" style="color:var(--muted);font-size:14px;line-height:1.8">
        <p>â€¢ ë°°ì†¡: í‰ì¼ ì˜¤í›„ 2ì‹œ ì´ì „ ì£¼ë¬¸ ë‹¹ì¼ ì¶œê³ (ê³µíœ´ì¼ ì œì™¸). í‰ê·  1~2ì¼ ì†Œìš”.</p>
        <p>â€¢ êµí™˜/ë°˜í’ˆ: ìˆ˜ë ¹ í›„ 7ì¼ ì´ë‚´ ë¯¸ì‚¬ìš©Â·íƒ ë³´ì¡´ ì‹œ ê°€ëŠ¥. ë‹¨ìˆœ ë³€ì‹¬ ì™•ë³µ ë°°ì†¡ë¹„ 6,000ì›.</p>
        <p>â€¢ í•˜ì ì²˜ë¦¬: ìˆ˜ë ¹ í›„ 48ì‹œê°„ ë‚´ ì‚¬ì§„ê³¼ í•¨ê»˜ ë¬¸ì˜ ì£¼ì„¸ìš”. í™•ì¸ í›„ ë¹„ìš© ì—†ì´ êµí™˜/ë°˜í’ˆ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
        <p>â€¢ ë¬¸ì˜: <a href="mailto:anomal25@naver.com">anomal25@naver.com</a> / ì¸ìŠ¤íƒ€ DM</p>
      </div>
    </section>
  </main>

  <footer class="ft">
    <div class="wrap">Â© <span id="yy"></span> anomal. All rights reserved. Â· <a href="/terms.html">ì´ìš©ì•½ê´€</a> Â· <a href="/privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></div>
  </footer>

  <!-- CART DRAWER -->
  <div id="ov" class="overlay"></div>
  <aside id="cart" class="drawer" aria-hidden="true">
    <h3>ì¥ë°”êµ¬ë‹ˆ</h3>
    <div class="content" id="cartItems"></div>
    <div class="foot">
      <div class="row" style="margin-bottom:8px"><span>ì´ ìƒí’ˆê¸ˆì•¡</span><strong id="cartTotal">â‚©0</strong></div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
        <button id="goCheckout" class="btn prime" type="button">ì²´í¬ì•„ì›ƒ</button>
        <button id="clearCart" class="btn" type="button">ë¹„ìš°ê¸°</button>
      </div>
      <div style="margin-top:10px;font-size:12px;color:#6b7280">ê°„í¸ê²°ì œ(ë°ëª¨):
        <button class="btn" type="button" onclick="toast('ì¹´ì¹´ì˜¤í˜ì´ ì¤€ë¹„ì¤‘')">ì¹´ì¹´ì˜¤í˜ì´</button>
        <button class="btn" type="button" onclick="toast('ë„¤ì´ë²„í˜ì´ ì¤€ë¹„ì¤‘')">ë„¤ì´ë²„í˜ì´</button>
        <button class="btn" type="button" onclick="toast('TossPayments ì¤€ë¹„ì¤‘')">Toss</button>
      </div>
    </div>
  </aside>

  <!-- LOGIN MODAL -->
  <div id="auth" class="modal" aria-hidden="true">
    <div class="box">
      <h3>ë¡œê·¸ì¸ / íšŒì›ê°€ì…</h3>
      <label>ì´ë©”ì¼</label>
      <input id="authEmail" type="email" placeholder="you@example.com" />
      <label>ë¹„ë°€ë²ˆí˜¸</label>
      <input id="authPw" type="password" placeholder="8ì ì´ìƒ" />
      <div style="display:flex;gap:8px;margin-top:12px">
        <button id="authLogin" class="btn prime" type="button">ë¡œê·¸ì¸</button>
        <button id="authClose" class="btn" type="button">ë‹«ê¸°</button>
      </div>
      <p style="color:#6b7280;font-size:12px;margin-top:8px">* ë°ëª¨ìš© ë¡œì»¬ ì €ì¥ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.</p>
    </div>
  </div>

  <div class="toast" id="toast">ì•Œë¦¼</div>

  <script>
    // ===== ìœ í‹¸ =====
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    const money = n => 'â‚©' + Number(n||0).toLocaleString('ko-KR');
    const save = (k,v)=> localStorage.setItem(k, JSON.stringify(v));
    const load = (k,def)=> JSON.parse(localStorage.getItem(k) || JSON.stringify(def));
    const toast = (t)=>{ const el=$('#toast'); el.textContent=t; el.classList.add('show'); setTimeout(()=>el.classList.remove('show'),1200); };

    // ===== ì—°ë„ & ETA =====
    $('#yy').textContent = new Date().getFullYear();
    (function setETA(){
      const now = new Date();
      const cutoff = new Date(); cutoff.setHours(14,0,0,0);
      const ship = new Date(now < cutoff ? now : new Date(now.getTime()+86400000)); // ì˜¤ëŠ˜ 14ì‹œ ì´ì „ ì£¼ë¬¸=ì˜¤ëŠ˜ ì¶œê³ , ì´í›„=ë‚´ì¼ ì¶œê³ 
      const arrive = new Date(ship.getTime()+86400000); // í‰ê·  1ì¼ ë„ì°© ê°€ì •
      const fmt = d => `${d.getMonth()+1}/${d.getDate()}(í‰ê· )`;
      $('#etaText').textContent = fmt(arrive);
    })();

    // ===== ë¡œê·¸ì¸(ë°ëª¨) =====
    const auth = load('auth', null);
    const loginBtn = $('#loginBtn');
    const modal = $('#auth');
    const openAuth = ()=> modal.classList.add('show');
    const closeAuth = ()=> modal.classList.remove('show');
    const applyAuthUI = ()=>{
      const a = load('auth', null);
      if(a){ loginBtn.textContent = `${a.email.split('@')[0]} ë‹˜`; loginBtn.onclick = ()=>{ localStorage.removeItem('auth'); applyAuthUI(); toast('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤'); } }
      else { loginBtn.textContent='ë¡œê·¸ì¸'; loginBtn.onclick=openAuth; }
    };
    applyAuthUI();
    $('#authClose').onclick = closeAuth;
    $('#authLogin').onclick = ()=>{
      const email=$('#authEmail').value.trim();
      const pw=$('#authPw').value.trim();
      if(!/^[^@]+@[^@]+\.[^@]+$/.test(email)) return toast('ì´ë©”ì¼ í˜•ì‹ì„ í™•ì¸í•˜ì„¸ìš”');
      if(pw.length<8) return toast('ë¹„ë°€ë²ˆí˜¸ 8ì ì´ìƒ');
      save('auth',{email}); closeAuth(); applyAuthUI(); toast('ë¡œê·¸ì¸ ì™„ë£Œ');
    };

    // ===== ì¥ë°”êµ¬ë‹ˆ =====
    const ov = $('#ov');
    const cartDr = $('#cart');
    const cartBtn = $('#cartBtn');
    const cartCount = $('#cartCount');
    const cartItemsEl = $('#cartItems');
    const CART_KEY='cartItems';

    function getCart(){ return load(CART_KEY, []); }
    function setCart(items){ save(CART_KEY, items); updateCartBadge(); renderCart(); }
    function updateCartBadge(){ const n=getCart().reduce((s,i)=>s+i.qty,0); cartCount.textContent=n; cartCount.style.display = n? 'inline-flex':'none'; }

    function addToCart(item){
      const items=getCart();
      const idx=items.findIndex(i=> i.sku===item.sku);
      if(idx>-1){ items[idx].qty=Math.min(items[idx].qty+1, 99); }
      else { items.push({...item, qty:1}); }
      setCart(items); toast('ì¥ë°”êµ¬ë‹ˆì— ë‹´ì•˜ìŠµë‹ˆë‹¤');
    }

    function renderCart(){
      const items=getCart();
      if(items.length===0){ cartItemsEl.innerHTML='<p style="color:#6b7280">ë‹´ê¸´ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>'; $('#cartTotal').textContent=money(0); return; }
      let html=''; let total=0;
      items.forEach((it,idx)=>{
        const line=it.price*it.qty; total+=line;
        html += `<div style="display:grid;grid-template-columns:60px 1fr auto;gap:10px;align-items:center;margin-bottom:12px">
          <img src="${it.img}" alt="${it.name}" style="width:60px;height:60px;object-fit:cover;border:1px solid var(--line);border-radius:8px"/>
          <div>
            <div style="font-weight:600">${it.name}</div>
            <div style="color:#6b7280;font-size:12px">ìƒ‰ìƒ: ${it.color}</div>
            <div class="qty" aria-label="ìˆ˜ëŸ‰ ì¡°ì ˆ"><button data-idx="${idx}" class="qminus">-</button><span>${it.qty}</span><button data-idx="${idx}" class="qplus">+</button></div>
          </div>
          <div style="text-align:right">
            <div>${money(line)}</div>
            <button data-idx="${idx}" class="btn" style="height:32px;margin-top:6px">ì‚­ì œ</button>
          </div>
        </div>`;
      });
      cartItemsEl.innerHTML=html; $('#cartTotal').textContent=money(total);
    }

    function openCart(){ ov.classList.add('show'); cartDr.classList.add('show'); renderCart(); }
    function closeCart(){ ov.classList.remove('show'); cartDr.classList.remove('show'); }

    ov.addEventListener('click', closeCart);
    cartBtn.addEventListener('click', openCart);

    // Cart item events (delegate)
    cartItemsEl.addEventListener('click', (e)=>{
      const idx = e.target.dataset.idx;
      const items=getCart();
      if(e.target.classList.contains('qminus')){ items[idx].qty=Math.max(1, items[idx].qty-1); setCart(items); }
      else if(e.target.classList.contains('qplus')){ items[idx].qty=Math.min(99, items[idx].qty+1); setCart(items); }
      else if(e.target.textContent==='ì‚­ì œ'){ items.splice(idx,1); setCart(items); }
    });

    $('#clearCart').addEventListener('click', ()=>{ setCart([]); });
    $('#goCheckout').addEventListener('click', ()=>{
      const items = getCart();
      if(!items.length) return toast('ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì—ˆìŠµë‹ˆë‹¤');
      const payload = encodeURIComponent(btoa(unescape(encodeURIComponent(JSON.stringify(items)))));
      location.href = '/checkout.html?cart=' + payload;
    });

    updateCartBadge();

    // ì œí’ˆ ì¹´ë“œ ì´ë²¤íŠ¸
    $$('.card').forEach(card=>{
      // ì¹´ë“œ í´ë¦­ â†’ ìƒì„¸ í˜ì´ì§€
      card.addEventListener('click', (e)=>{
        if(e.target.closest('.buy')) return; // ë²„íŠ¼ í´ë¦­ì€ ì œì™¸
        const sku=card.dataset.sku; window.open('/?view=detail&sku='+encodeURIComponent(sku),'_blank');
      });
      // ì¥ë°”êµ¬ë‹ˆ
      card.querySelector('.addcart').addEventListener('click', ()=>{
        const it={
          sku:card.dataset.sku,
          name:card.dataset.name,
          price:+card.dataset.price,
          color:card.dataset.color||'',
          img:card.querySelector('img').src
        };
        addToCart(it);
      });
      // ë°”ë¡œêµ¬ë§¤
      card.querySelector('.checkout').addEventListener('click', ()=>{
        const q = new URLSearchParams({ name:card.dataset.name, price:card.dataset.price, color:card.dataset.color||'', qty:1 });
        location.href = '/checkout.html?' + q.toString();
      });
    });

    // ===== ë¦¬ë·°(ë¡œì»¬) =====
    const REV_KEY='reviews';
    function getRevs(){ return load(REV_KEY, {}); }
    function setRevs(o){ save(REV_KEY, o); renderReviews(); }
    function starStr(n){ return 'â˜…â˜…â˜…â˜…â˜…'.slice(0,n) + 'â˜†â˜†â˜†â˜†â˜†'.slice(0,5-n); }

    function renderReviews(){
      const map=getRevs();
      const out=[];
      Object.entries(map).forEach(([sku, arr])=>{
        if(!arr.length) return;
        const avg = (arr.reduce((s,r)=>s+r.star,0)/arr.length).toFixed(1);
        out.push(`<div class="rv"><div class="stars">${sku} Â· í‰ê·  ${avg}ì </div>${arr.map(r=>`<div class="txt">${starStr(r.star)} â€” ${r.text.replace(/</g,'&lt;')}</div>`).join('')}</div>`);
      });
      $('#reviewList').innerHTML = out.join('') || '<div class="rv"><div class="txt">ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</div></div>';
    }

    $('#revSubmit').addEventListener('click', ()=>{
      const sku=$('#revSku').value; const star=+$('#revStar').value; const text=$('#revText').value.trim();
      if(!text) return toast('ë¦¬ë·° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”');
      const map=getRevs(); map[sku]=map[sku]||[]; map[sku].push({star,text,ts:Date.now()}); setRevs(map); $('#revText').value=''; toast('ë¦¬ë·°ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤');
    });
    $('#revClear').addEventListener('click', ()=>{ save(REV_KEY, {}); renderReviews(); });
    renderReviews();

    // ===== ë·° íŒŒë¼ë¯¸í„° ì²˜ë¦¬ =====
    (function(){
      const p = new URLSearchParams(location.search); const view = p.get('view'); if(!view) return;
      const main = document.querySelector('main.wrap');
      const hide = sel => { const el=document.querySelector(sel); if(el) el.style.display='none'; };
      const PRODUCTS = {
        'camp-blue': { name:'Camp Cap â€” Blue', price:59000, color:'Blue', img:'/img/cap_blue.jpg', desc:'ì„ ëª…í•œ ë¸”ë£¨ í†¤ì˜ ìº í”„ìº¡. ê°€ë²¼ìš´ ì›ë‹¨ê³¼ ì•ˆì •ì ì¸ 5íŒ¨ë„ íŒ¨í„´.', stock:7 },
        'camp-black': { name:'Camp Cap â€” Black', price:59000, color:'Black', img:'/img/cap_black.jpg', desc:'ê°€ì¥ ì¸ê¸° ìˆëŠ” ë¸”ë™ ì»¬ëŸ¬. ì–´ë–¤ ì½”ë””ì—ë„ ë§¤ì¹­ ì‰¬ìš´ ë°ì¼ë¦¬ ì•„ì´í…œ.', stock:3 }
      };

      if(view==='shop'){
        document.title='Shop â€” anomal'; hide('.hero'); hide('#about'); hide('#reviews'); hide('#cs'); window.scrollTo(0,0); return;
      }

      if(view==='detail'){
        document.title='Product â€” anomal'; hide('.hero'); hide('#about'); hide('#reviews'); hide('#cs'); hide('#shop');
        const sku = p.get('sku'); const pd = PRODUCTS[sku];
        if(!pd){ main.innerHTML = '<section class="sec"><h2>ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</h2><p><a href="/">ë©”ì¸ìœ¼ë¡œ</a></p></section>'; return; }
        const q = new URLSearchParams({ name: pd.name, price: pd.price, color: pd.color, qty: 1 });
        main.innerHTML = `
          <section class="sec" id="pdp">
            <div style="display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:start">
              <div style="position:relative;border:1px solid var(--line);border-radius:16px;overflow:hidden;background:#fff">
                <span class="stock" style="left:12px;top:12px">ì¬ê³  ${pd.stock}</span>
                <img src="${pd.img}" alt="${pd.name}" style="width:100%;height:auto;display:block"/>
              </div>
              <div>
                <h1 style="margin:0 0 8px">${pd.name}</h1>
                <div style="font-size:20px;font-weight:700;margin-bottom:12px">${money(pd.price)}</div>
                <div style="color:var(--muted);line-height:1.7;margin-bottom:16px">${pd.desc}</div>
                <div style="display:flex;gap:8px">
                  <button id="pdpAdd" class="btn" type="button">ì¥ë°”êµ¬ë‹ˆ</button>
                  <a class="btn prime" href="/checkout.html?${q.toString()}">ë°”ë¡œêµ¬ë§¤</a>
                </div>
                <div style="margin-top:16px;color:#6b7280;font-size:13px">ğŸšš ì§€ê¸ˆ ì£¼ë¬¸ ì‹œ <span id="etaText2"></span> ë„ì°© ì˜ˆìƒ</div>
              </div>
            </div>
          </section>`;
        // ETA 2
        (function(){
          const now = new Date(); const cutoff = new Date(); cutoff.setHours(14,0,0,0);
          const ship = new Date(now < cutoff ? now : new Date(now.getTime()+86400000));
          const arrive = new Date(ship.getTime()+86400000);
          $('#etaText2').textContent = `${arrive.getMonth()+1}/${arrive.getDate()}(í‰ê· )`;
        })();
        // PDP ì¥ë°”êµ¬ë‹ˆ
        $('#pdpAdd').addEventListener('click', ()=>{
          addToCart({ sku, name: pd.name, price: pd.price, color: pd.color, img: pd.img }); openCart();
        });
      }
    })();

    // Lazy
    $$('img').forEach(img=> img.loading='lazy');
  </script>
</body>
</html>
